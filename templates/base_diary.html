{% load static %}
<!DOCTYPE html>
<html lang="ko" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}여행 다이어리{% endblock %}</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&family=Source+Code+Pro:wght@400;500&display=swap');
        body { font-family: 'Noto Sans KR', sans-serif; background-color: #f8fafc; }
        .code-block { font-family: 'Source Code Pro', monospace; }
        .nav-link.active { color: #0284c7; border-bottom-color: #0284c7; }
        .nav-link { transition: all 0.2s ease-in-out; border-bottom: 2px solid transparent; }
        section { scroll-margin-top: 80px; }
    </style>
</head>
<body class="text-slate-700">

    <header class="text-center py-12 px-4 bg-white border-b border-slate-200">
        <h1 class="text-4xl md:text-5xl font-bold text-slate-800">나의 여행 다이어리</h1>
        <p class="mt-4 text-lg text-slate-600 max-w-3xl mx-auto">나만의 여행을 기록해 보세요.</p>
    </header>

    <nav id="main-nav" class="sticky top-0 z-50 bg-white/80 backdrop-blur-lg shadow-sm">
        <div class="container mx-auto px-4">
            <div class="flex justify-center items-center space-x-4 md:space-x-8 overflow-x-auto whitespace-nowrap">
                <!-- <a href="{% url 'travel:diary_home' %}" class="nav-link text-slate-600 hover:text-sky-600 font-semibold py-4 px-2 text-sm md:text-base">다이어리 홈</a> -->
                <!-- <a href="{% url 'travel:upload_diary_entry' %}" class="nav-link text-slate-600 hover:text-sky-600 font-semibold py-4 px-2 text-sm md:text-base">업로드</a> -->
                <a href="{% url 'travel:diary_list' %}" class="nav-link text-slate-600 hover:text-sky-600 font-semibold py-4 px-2 text-sm md:text-base">내 다이어리</a>
            </div>
        </div>
    </nav>

    <main class="container mx-auto p-4 md:p-8">
        {% block content %}
        {% endblock %}
    </main>

    <footer class="text-center py-8 border-t border-slate-200 bg-white">
        <p class="text-slate-500">이 가이드는 프로젝트의 요구사항에 맞는 최적의 기술을 선택하는 데 도움을 주기 위해 제작되었습니다.</p>
    </footer>

    <div id="toast" class="fixed bottom-10 right-10 bg-slate-800 text-white py-2 px-4 rounded-lg shadow-lg opacity-0 transition-opacity duration-300">복사되었습니다!</div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const copyButtons = document.querySelectorAll('.copy-btn');
            const toast = document.getElementById('toast');

            copyButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const code = button.nextElementSibling.querySelector('code').innerText;
                    navigator.clipboard.writeText(code).then(() => {
                        toast.classList.remove('opacity-0');
                        setTimeout(() => {
                            toast.classList.add('opacity-0');
                        }, 2000);
                    });
                });
            });

            const navLinks = document.querySelectorAll('.nav-link');
            const sections = document.querySelectorAll('section');

            const observerOptions = {
                root: null,
                rootMargin: '0px',
                threshold: 0.3
            };

            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        navLinks.forEach(link => {
                            link.classList.remove('active');
                            if (link.getAttribute('href').substring(1) === entry.target.id) {
                                link.classList.add('active');
                            }
                        });
                    }
                });
            }, observerOptions);

            // sections.forEach(section => {
            //     observer.observe(section);
            // });
            
            // navLinks[0].classList.add('active');
        });
    </script>
</body>
</html>